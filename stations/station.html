<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title id="title">Loading...</title>
</head>
<body>
  <h1 id="station-name">Loading...</h1>
  <audio id="player" controls autoplay></audio>

<script>
(async () => {
  const urlParams = new URLSearchParams(window.location.search);
  const stationId = urlParams.get("id");

  const stations = await fetch("/stations.json").then(r => r.json());
  const station = stations.find(s => s.station_id === stationId);

  if (!station) {
    document.body.innerHTML = "<h1>Station not found</h1>";
    return;
  }

  document.getElementById("title").innerText = station.station_name;
  document.getElementById("station-name").innerText = station.station_name;
  document.getElementById("player").src = station.station_stream_url;
})();
</script>

</body>
</html>
